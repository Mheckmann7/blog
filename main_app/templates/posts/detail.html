{% extends 'base.html' %}

{% block content %}

<h1>Posts Detail</h1>
<div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-content">
            <span class="card-title">{{ post.title }}</span>
            <p>Body: {{ post.body }}</p>
            <p>Date: {{ post.date }}</p>
            <p>Created by: {{ post.user }}</p>
            <a class="btn halfway-fab waves-effect waves-light red"><i class="material-icons">thumb_up</i></a>
            <a class="btn halfway-fab waves-effect waves-light red"><i class="material-icons">favorite</i></a>
            <a class="btn halfway-fab waves-effect waves-light red"><i class="material-icons">comment</i></a>
        </div>
    </div>
    {% if post.user == user %}
    <a href="{% url 'posts_update' post.id %}" class="btn">Edit</a>
    <a href="{% url 'posts_delete' post.id %}" class="btn">Delete</a>
    {% endif %}
<br>
<div>
    <h3>Comment</h3>
    <form action="{% url 'add_comment' post.id %}" method="POST">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <input type="submit" class="btn" value="Add Comment">
    </form>
</div>

{% for comment in post.comment_set.all %}
    <div>
        <p>{{comment.body}}</p>
        <p>{{comment.date}}</p>
    </div>
    <a href="{% url 'comments_update' comment.id %}" class="btn">Edit</a>
    <a href="{% url 'comments_delete' comment.id %}" class="btn">Delete</a>
{% endfor %}

</div>

{% endblock %}